(this["webpackJsonptimer-app"]=this["webpackJsonptimer-app"]||[]).push([[0],{41:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(3),c=n.n(r),i=n(13),s=n.n(i),o=n(14),u=n.n(o),l=(n(41),n(5));var j=n(10),d=n(8),b=n(12),m=(n(43),window);m.firebaseInitialized||(b.a.initializeApp({apiKey:"AIzaSyCwXyge90tOlHAdTeZpsfDnuU-zgeANVgg",authDomain:"timer-app-8b2ae.firebaseapp.com",databaseURL:"https://timer-app-8b2ae-default-rtdb.firebaseio.com",projectId:"timer-app-8b2ae",storageBucket:"timer-app-8b2ae.appspot.com",messagingSenderId:"236519982495",appId:"1:236519982495:web:5789f2fb6a9a3f1d1029aa"}),m.firebaseInitialized=!0);var f=b.a.database().ref("users");function O(e,t){return f.update(e.reduce((function(e,n){return Object(d.a)(Object(d.a)({},e),Object.entries(t).reduce((function(e,t){var a=Object(l.a)(t,2),r=a[0],c=a[1];return Object(d.a)(Object(d.a)({},e),{},Object(j.a)({},"".concat(n,"/").concat(r),c))}),{}))}),{}))}location.href.match("clear")&&f.set(null);var p=!1,v={},h=new Promise((function(e){f.once("value",(function(t){v=t.val(),e()}))})).then((function(){p=!0})),x=function(){var e=Object(r.useReducer)((function(e){return(e+1)%50}),0),t=Object(l.a)(e,2)[1],n=v;Object(r.useEffect)((function(){var e=function(e){var n;n=e.val()||{},v=n,t()};return f.on("value",e),function(){return f.off("value",e)}}),[]);var a=Object.entries(n).map((function(e){var t=Object(l.a)(e,2),n=t[0],a=t[1];return Object(d.a)(Object(d.a)({},a),{},{id:n})}));if(!p)throw h;return[a,{addUser:function(e){var t=e.trim();Object.values(n).find((function(e){return e.name===t}))||f.push({name:t,timerStart:null,timeTotal:0})},startUserTimer:function(e){O([e],{timerStart:Date.now()})},stopUserTimer:function(e){var t=n[e];O([e],{timerStart:null,timeTotal:t.timeTotal+(Date.now()-t.timerStart)})},resetUserTimers:function(){O(Object.keys(n),{timerStart:null,timeTotal:0})},clearUsers:function(){f.set(null)}}]};function g(e){var t,n=e.closeModal,c=Object(r.useState)(""),i=Object(l.a)(c,2),s=i[0],o=i[1],u=x(),j=Object(l.a)(u,2)[1],d=j.addUser,b=j.resetUserTimers,m=j.clearUsers;return Object(a.jsxs)("div",{className:"addUserModal",children:[Object(a.jsxs)("div",{className:"flexBox",children:[Object(a.jsx)("div",{className:"flexItem"}),Object(a.jsx)("div",{className:"closeButton",onClick:n,children:"X"})]}),Object(a.jsxs)("div",{className:"optionsMenu",children:[Object(a.jsxs)("div",{className:"manageModalRow",children:[Object(a.jsx)("input",{className:"newUserInput",value:s,onChange:function(e){return o(e.target.value)},placeholder:"User name"}),Object(a.jsx)("br",{}),Object(a.jsx)("button",{onClick:s?function(){d(s),n()}:void 0,disabled:!s,children:"Add user"})]}),Object(a.jsx)("div",{className:"manageModalRow",children:Object(a.jsx)("button",{onClick:function(){b(),n()},children:"Reset Timers"})}),Object(a.jsx)("div",{className:"manageModalRow",children:Object(a.jsx)("button",{onClick:(t=function(){m(),n()},function(){confirm("Are you sure you want to clear all users?")&&t()}),children:"Clear all users"})})]})]})}n(47);function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=String(Math.floor(e)),a=t-n.length;return"0".repeat(a>=0?a:0)+n}function T(e){var t=e.time,n=N(t/6e4),r=N(t/1e3%60),c=N(t%100);return Object(a.jsx)(a.Fragment,{children:"".concat(n,":").concat(r,":").concat(c)})}function w(e){var t=e.userName,n=e.timerStart,c=e.totalTimer,i=e.startTimer,s=e.stopTimer,o=Object(r.useReducer)((function(e){return(e+1)%50}),0),u=Object(l.a)(o,2)[1];return Object(r.useEffect)((function(){if(n){console.log("effect");var e=setInterval((function(){return u()}),103);return function(){return clearInterval(e)}}}),[n]),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"userName",children:t}),Object(a.jsx)("div",{className:"timer",children:n?Object(a.jsx)(T,{time:c+(Date.now()-n)}):Object(a.jsx)(T,{time:c})}),Object(a.jsx)("div",{className:"buttons",children:n?Object(a.jsx)("button",{className:"actionButton stopButton",onClick:function(){s()},children:"Stop"}):Object(a.jsx)("button",{className:"actionButton startButton",onClick:function(){i()},children:"Start"})})]})}var S=function(){var e=x(),t=Object(l.a)(e,2),n=t[0],c=t[1],i=c.startUserTimer,s=c.stopUserTimer,o=Object(r.useState)(!1),u=Object(l.a)(o,2),j=u[0],d=u[1];return Object(a.jsxs)("div",{className:"App",children:[j&&Object(a.jsx)(g,{closeModal:function(){return d(!1)}}),n.map((function(e){var t=e.name,n=e.timeTotal,r=e.timerStart,c=e.id;return Object(a.jsx)(w,{userName:t,timerStart:r,totalTimer:n,startTimer:function(){return i(c)},stopTimer:function(){return s(c)}},t)})),Object(a.jsx)("button",{className:"addUserButton",onClick:function(){return d(!0)},children:"Manage"})]})},U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,49)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};u.a.render(Object(a.jsx)(r.Suspense,{fallback:Object(a.jsx)("div",{className:"loader",children:Object(a.jsx)(s.a,{type:"BallTriangle",color:"#00BFFF",height:80,width:80})}),children:Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(S,{})})}),document.getElementById("root")),U()}},[[48,1,2]]]);
//# sourceMappingURL=main.58d15f84.chunk.js.map